<div class="main-content" style="margin-top: -4%;">
  <div class="page-content">
    <div class="container-fluid">

      <div class="row">
        <div class="col-12">
          <div style="padding:1px" class="page-title-box d-sm-flex align-items-center justify-content-between">
            <h4 class="mb-sm-0 font-size-18"><i class="bx bxs-user-check"></i>Dashboard</h4>
            <div class="page-title-right">
              <ol class="breadcrumb m-0">
                <li class="breadcrumb-item"> <a routerLink="/home/cro/dashboards" class="waves-effect">Dashboard</a>
                  <!-- <li class="breadcrumb-item"><a >CRO</a></li> -->
              </ol>
            </div>
          </div>
        </div>
      </div>
      <!-- end page title -->


      <div *ngIf="adminfields">
        <br>
        <br>

        <div class="row">

          <div class="col-md-2">
            <div class="form-group">
              <p-card class="cardcolor">
                <h5 style="margin-left: 34%;" style="text-align: center;">Users</h5>
                <h6 style="margin-left: 41%;" style="text-align: center;">12</h6>
              </p-card>
            </div>
          </div>
          <div class="col-md-2">
            <div class="form-group">
              <p-card class="cardcolor">
                <h5 style="margin-left: 34%;" style="text-align: center;">CRO</h5>
                <h6 style="margin-left: 41%;" style="text-align: center;">{{this.dashboardsData.no_of_sites}}</h6>


              </p-card>
            </div>
          </div>


        </div>

      </div>

      <div *ngIf="disablefields">
        
      

        <div class="row">

          <div class="col-md-2" style="margin-left: 20px;">
            <div class="form-group">
              <p-card class="cardcolor">
                <h5 style="margin-left: 34%;" style="text-align: center;">Sponsors</h5>
                <h6 style="margin-left: 41%;" style="text-align: center;">{{this.dashboardsData.no_of_sponsors}}</h6>


              </p-card>
            </div>
          </div>
          <div class="col-md-2">
            <div class="form-group">
              <p-card class="cardcolor">
                <h5 style="margin-left: 34%;" style="text-align: center;">Sites</h5>
                <h6 style="margin-left: 41%;" style="text-align: center;">{{this.dashboardsData.no_of_sites}}</h6>


              </p-card>
            </div>
          </div>

          <div class="col-md-2">
            <div class="form-group">
              <p-card class="cardcolor">
                <h5 style="margin-left: 34%;" style="text-align: center;">Lab Tests</h5>
                <h6 style="margin-left: 41%;" style="text-align: center;">{{this.dashboardsData.no_of_lab_tests}}</h6>


              </p-card>
            </div>
          </div>
          <div class="col-md-2">
            <div class="form-group">
              <p-card class="cardcolor">
                <h5 style="margin-left: 34%;" style="text-align: center;">Lab Creation</h5>
                <h6 style="margin-left: 41%;" style="text-align: center;">{{this.dashboardsData.no_of_lab_tests || 4}}
                </h6>


              </p-card>
            </div>
            </div>
            <div class="col-md-2" >
              <div class="form-group">
                <p-card class="cardcolor">
                  <h5 style="margin-left: 34%;" style="text-align: center;">Materials</h5>
                  <h6 style="margin-left: 41%;" style="text-align: center;">{{this.dashboardsData.no_of_materials}}</h6>
                </p-card>
              </div>
            </div>
          </div>
       
          <br>
          <div class="row" >

            <div class="col-md-2" style="margin-left: 20px;">
              <div class="form-group">
                <p-card class="cardcolor">
                  <h5 style="margin-left: 34%;" style="text-align: center;">Study Summary</h5>
                  <h6 style="margin-left: 41%;" style="text-align: center;">{{this.dashboardsData.no_of_protocols}}</h6>
                </p-card>
              </div>
            </div>
          </div>
        </div>
        </div>

       


      </div>


      <div *ngIf="enableFields">
     
        <!-- <h4 class="mb-sm-0 font-size-18" style="margin-left: 25px;">Central Lab</h4>
        <hr> -->
        <div class="row" style="margin-top: -4%">

          <div class="col-md-2" style="margin-left: 41px;">
            <div class="form-group">
              <p-card class="cardcolor" class="row">
                <h5 style="margin-left: 34%;" style="text-align: center;">No.of Studies</h5>
                <h6 style="margin-left: 41%;">{{this.dashboardsData.no_of_protocols}}</h6>


              </p-card>
            </div>
          </div>
          <div class="col-md-2">
            <div class="form-group">
              <p-card class="cardcolor">
                <h5 style="margin-left: 54%;" style="text-align: center;">No.of Kits</h5>
                <h6 style="margin-left: 71%;" style="text-align: center;">{{this.dashboardsData.no_of_kits}}</h6>


              </p-card>
            </div>
          </div>

          <div class="col-md-2">
            <div class="form-group">
              <p-card class="cardcolor">
                <h5 style="margin-left: 34%;" style="text-align: center;">Prepared Kits</h5>
                <h6 style="margin-left: 41%;">{{this.dashboardsData.no_of_completed_kits || 4}}</h6>


              </p-card>
            </div>
          </div>
          <div class="col-md-2">
            <div class="form-group">
              <p-card class="cardcolor">
                <h5 style="margin-left: 34%;" style="text-align: center;">In Progress kits</h5>
                <h6 style="margin-left: 41%;">{{this.dashboardsData.no_of_inprogress_kits || 4}} </h6>


              </p-card>
            </div>
          </div>
        </div>



      </div>
      <div *ngIf="verificationFields">
      
        <div class="row" style="margin-top: -4%">

          <div class="col-md-2" style="margin-left: 41px;">
            <div class="form-group">
              <p-card class="cardcolor" class="row">
                <h5 style="margin-left: 34%;" style="text-align: center;">No.of Studies</h5>
                <h6 style="margin-left: 41%;">{{this.dashboardsData.no_of_protocols}}</h6>


              </p-card>
            </div>
          </div>


          <div class="col-md-2">
            <div class="form-group">
              <p-card class="cardcolor">
                <h5 style="margin-left: 24%;" style="text-align: center;">Verified Kits</h5>
                <h6 style="margin-left: 41%;">{{this.dashboardsData.no_of_verified_kits}}</h6>


              </p-card>

            </div>
          </div>
          <div class="col-md-2">
            <div class="form-group">
              <p-card class="cardcolor">
                <h5 style="margin-left: 24%;" style="text-align: center; font-size: 90%;">Not Verified kits</h5>
                <h6 style="margin-left: 41%;">{{this.dashboardsData.no_of_not_verified_kits || 9}}</h6>


              </p-card>
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="distributionFields">
        <br>
        <br>
        <div class="row" style="margin-top: -4%">
          <div class="col-md-2" style="margin-left: 41px;">
            <div class="form-group">
              <p-card class="cardcolor" class="row">
                <h5 style="margin-left: 34%;" style="text-align: center;">No.of Studies</h5>
                <h6 style="margin-left: 41%;">{{this.dashboardsData.no_of_protocols}}</h6>


              </p-card>
            </div>
          </div>
          <div class="col-md-2" style="margin-left: 20px;">
            <div class="form-group">
              <p-card class="cardcolor">
                <h5 style="margin-left: 34%;" style="text-align: center;">No.of Sites</h5>
                <h6 style="margin-left: 41%;">{{this.dashboardsData.no_of_sites}}</h6>
              </p-card>
            </div>
          </div>


        </div>
      </div>


      <div *ngIf="acknowledgementFields">
        <br>
        <br>
        <div class="row" style="margin-top: -4%">

          <div class="col-md-2" style="margin-left: 41px;">
            <div class="form-group">
              <p-card class="cardcolor" class="row">
                <h5 style="margin-left: 34%;" style="text-align: center;">No.of Studies</h5>
                <h6 style="margin-left: 41%;">{{this.dashboardsData.no_of_protocols}}</h6>


              </p-card>
            </div>
          </div>


          <div class="col-md-2">
            <div class="form-group">
              <p-card class="cardcolor">
                <h5 style="margin-left: 24%;" style="text-align: center;">Received </h5>
                <h6 style="margin-left: 41%;">{{this.dashboardsData.no_of_verified_kits}}</h6>


              </p-card>

            </div>
          </div>
          <div class="col-md-2">
            <div class="form-group">
              <p-card class="cardcolor">
                <h5 style="margin-left: 24%;" style="text-align: center; font-size: 100%;">Pending </h5>
                <h6 style="margin-left: 41%;">{{this.dashboardsData.no_of_not_verified_kits || 9}}</h6>


              </p-card>
            </div>
          </div>
        </div>
      </div>



      <div *ngIf="disappearfields">
      
        <div class="row" style="margin-top: -4%">
          <div class="col-md-2" style="margin-left: 20px;">
            <div class="form-group">
              <p-card class="cardcolor">
                <h5 style="margin-left: 54%;" style="text-align: center;">No.of Studies </h5>
                <h6 style="margin-left: 71%;" style="text-align: center;">{{this.dashboardsData.no_of_protocols}}
                </h6>
              </p-card>
            </div>
          </div>

          <div class="col-md-2">
            <div class="form-group">
              <p-card class="cardcolor">
                <h5 style="margin-left: 54%;" style="text-align: center;">ReceivedSamples </h5>
                <h6 style="margin-left: 71%;" style="text-align: center;">
                  {{this.dashboardsData.no_of_received_collections}}</h6>
              </p-card>
            </div>
          </div>
          <div class="col-md-2">
            <div class="form-group">
              <p-card class="cardcolor">
                <h5 style="margin-left: 54%;" style="text-align: center;">PendingSamples </h5>
                <h6 style="margin-left: 71%;" style="text-align: center;">
                  {{this.dashboardsData.no_of_pending_collections}}</h6>
              </p-card>
            </div>
          </div>

          <div class="col-md-2">
            <div class="form-group">
              <p-card class="cardcolor" class="row">
                <h5 style="margin-left: 54%;" style="text-align: center;">No.of Patients</h5>
                <h6 style="margin-left: 41%;">{{this.dashboardsData.no_of_patients}}</h6>
              </p-card>
            </div>
          </div>

        </div>
      </div>




      <div *ngIf="sponserfields">
       
        <div class="row">
          <div class="col-md-2" style="margin-left: 20px;">
            <div class="form-group">
              <p-card class="cardcolor">
                <h5 style="margin-left: 54%;" style="text-align: center;">No.of Studies </h5>
                <h6 style="margin-left: 71%;" style="text-align: center;">{{this.dashboardsData.no_of_protocols}}
                </h6>
              </p-card>
            </div>
          </div>
          <!-- <div class="row"> -->
          <div class="col-md-2">
            <div class="form-group">
              <p-card class="cardcolor">
                <h5 style="margin-left: 54%;" style="text-align: center;">No.of Sponsors </h5>
                <h6 style="margin-left: 71%;" style="text-align: center;">
                  {{this.dashboardsData.no_of_sponsors}}</h6>
              </p-card>
            </div>
          </div>

        </div>
      </div>


      <div *ngIf="crasiteenable">
        <div class="row">
          <div class="col-12">
            <div class="card">
              <div class="card-body">
                <div class="row">
                  <div class="row">
                    <div class="col-md-3">
                      <label for="formrow-firstname-input" class="form-label">Study ID</label>
                      <select class="form-select form-control" (change)="getdashboardDetails($event)">
                        <option selected value="">Select Study ID</option>
                        <option *ngFor="let data of protocols" [value]="data.id">
                          {{ data.protocol_id }}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div *ngIf="enablestudy">
                    <br>
                    <h4 style="color:blue"> Overall Dashboard</h4>
                    <div class="row" style="margin-top:2%">

                      <div class="col-md-3">
                        <h5 style="color:blue"> Summary Panel</h5>
                      </div>
                      <div class="col-md-3">
                        <h5 style="color:blue;text-align: center; ">Screening Number</h5>
                      </div>
                      <div class="col-md-3">
                        <h5 style="color:blue;text-align: center; margin-left: 21%">Randomization Status</h5>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-3">
                        <div class="form-group">
                          <div class="card">

                            <table id="datatable" class="table table-striped"
                              class="table table-bordered dt-responsive nowrap w-100 dataTable no-footer dtr-inline"
                              role="grid" aria-describedby="datatable_info" style="width: 82px;">
                              <thead>
                                <tr role="row">
                                  <th tabindex="0" aria-controls="datatable" rowspan="1" colspan="1"
                                    style="width: 335.2px;" aria-label="Name: activate to sort column ascending">
                                  </th>
                                  <th tabindex="0" aria-controls="datatable" rowspan="1" colspan="1"
                                    style="width: 243.2px;" aria-sort="ascending"
                                    aria-label="Code: activate to sort column descending">
                                    Actual
                                  </th>
                                  <th tabindex="0" aria-controls="datatable" rowspan="1" colspan="1"
                                    style="width: 335.2px;" aria-label="Name: activate to sort column ascending">
                                    Planned
                                  </th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr class="odd" style="  vertical-align: middle;">
                                  <th>Countries</th>
                                  <td>{{subjectDetails.actual_countries}}</td>
                                  <td>{{subjectDetails.planned_countries}}</td>
                                </tr>
                                <tr class="odd" style="  vertical-align: middle;">
                                  <th>Sites</th>
                                  <td>{{subjectDetails.actual_sites}}</td>
                                  <td>{{subjectDetails.planned_sites}}</td>
                                </tr>
                                <tr class="odd" style="  vertical-align: middle;">
                                  <th>Subjects Screened</th>
                                  <td>{{subjectDetails.acutal_subjects_screened}}</td>
                                  <td>{{subjectDetails.planned_subects_screened}}</td>
                                </tr>
                                <tr class="odd" style="  vertical-align: middle;">
                                  <th>--</th>
                                  <td>NA</td>
                                  <td>NA</td>
                                </tr>

                                <tr class="odd" style="  vertical-align: middle;">
                                  <th>Samples Received</th>
                                  <td>{{subjectDetails.actual_sample_received}}</td>
                                  <td>{{subjectDetails.planed_sample_received}}</td>
                                </tr>
                                <tr class="odd" style="  vertical-align: middle;">
                                  <th>--</th>
                                  <td>NA</td>
                                  <td>NA</td>
                                </tr>
                                <tr class="odd" style="  vertical-align: middle;">
                                  <th>--</th>
                                  <td>NA</td>
                                  <td>NA</td>
                                </tr>
                                <tr>
                                  <td colspan="12" *ngIf="subjectDetails.length === 0"
                                    style="text-align: center; font-size: 0.8rem;">
                                    No Data Found
                                  </td>
                                </tr>
                              </tbody>

                            </table>

                          </div>
                        </div>
                      </div>


                      <div class="col-md-3" style="margin-left:2%;margin-top: 6%;">
                        <div class="form-group">


                          <p-chart type="doughnut" [data]="dataCra" [options]="chartOptions"
                            [style]="{'width': '2%'}"></p-chart>

                        </div>
                      </div>

                      <!-- <div class="col-md-2"></div> -->
                      <div class="col-md-5" style="margin-top: 6%;">
                        <div class="form-group">

                          <p-chart class="custom-chart" type="bar" [data]="basicData"
                            [options]="basicOptions"></p-chart>
                        </div>

                      </div>

                      <!-- <div class="col-md-4" style="margin-top: 15%;">
                    <div class="form-group">
                      <div class="card">

                        <p-chart type="bar" [data]="stackedData" [options]="stackedOptions"></p-chart>
                        
                      </div>
                    </div>
                  </div> -->
                      <!-- <div class="col-md-4" style="margin-top: 15%;">
                    <div class="form-group">
                      <div class="card">
                        <p-chart type="bar" [data]="stackedData2" [options]="stackedOptions"></p-chart>
                      </div>
                    </div>
                  </div> -->
                    </div>
                  </div>
                  <div *ngIf="enablestudy">
                    <h4 style="color:blue">Dashboard for Study : {{protoname}}</h4>
                    <br>
                    <div class="row" style="margin-top:2%">

                      <div class="col-md-3">
                        <h5 style="color:blue"> Summary Panel</h5>
                      </div>
                      <div class="col-md-3">
                        <h5 style="color:blue;text-align: center; ">Screening Number</h5>
                      </div>
                      <div class="col-md-3">
                        <h5 style="color:blue;text-align: center; margin-left: 21%">Randomization Status</h5>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-3">
                        <div class="form-group">
                          <div class="card">

                            <table id="datatable" class="table table-striped"
                              class="table table-bordered dt-responsive nowrap w-100 dataTable no-footer dtr-inline"
                              role="grid" aria-describedby="datatable_info" style="width: 82px;">
                              <thead>
                                <tr role="row">
                                  <th tabindex="0" aria-controls="datatable" rowspan="1" colspan="1"
                                    style="width: 335.2px;" aria-label="Name: activate to sort column ascending">
                                  </th>
                                  <th tabindex="0" aria-controls="datatable" rowspan="1" colspan="1"
                                    style="width: 243.2px;" aria-sort="ascending"
                                    aria-label="Code: activate to sort column descending">
                                    Actual
                                  </th>
                                  <th tabindex="0" aria-controls="datatable" rowspan="1" colspan="1"
                                    style="width: 335.2px;" aria-label="Name: activate to sort column ascending">
                                    Planned
                                  </th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr class="odd" style="  vertical-align: middle;">
                                  <th>Countries</th>
                                  <td>{{subjectDetailsprotocol.actual_countries}}</td>
                                  <td>{{subjectDetailsprotocol.planned_countries}}</td>
                                </tr>
                                <tr class="odd" style="  vertical-align: middle;">
                                  <th>Sites</th>
                                  <td>{{subjectDetailsprotocol.actual_sites}}</td>
                                  <td>{{subjectDetailsprotocol.planned_sites}}</td>
                                </tr>
                                <tr class="odd" style="  vertical-align: middle;">
                                  <th>Subjects Screened</th>
                                  <td>{{subjectDetailsprotocol.acutal_subjects_screened}}</td>
                                  <td>{{subjectDetailsprotocol.planned_subects_screened}}</td>
                                </tr>
                                <tr class="odd" style="  vertical-align: middle;">
                                  <th>--</th>
                                  <td>NA</td>
                                  <td>NA</td>
                                </tr>

                                <tr class="odd" style="  vertical-align: middle;">
                                  <th>Samples Received</th>
                                  <td>{{subjectDetailsprotocol.actual_sample_received}}</td>
                                  <td>{{subjectDetailsprotocol.planed_sample_received}}</td>
                                </tr>
                                <tr class="odd" style="  vertical-align: middle;">
                                  <th>--</th>
                                  <td>NA</td>
                                  <td>NA</td>
                                </tr>
                                <tr class="odd" style="  vertical-align: middle;">
                                  <th>--</th>
                                  <td>NA</td>
                                  <td>NA</td>
                                </tr>
                                <tr>
                                  <td colspan="12" *ngIf="subjectDetails.length === 0"
                                    style="text-align: center; font-size: 0.8rem;">
                                    No Data Found
                                  </td>
                                </tr>
                              </tbody>

                            </table>

                          </div>
                        </div>
                      </div>


                      <div class="col-md-3" style="margin-left:2%;margin-top: 6%;">
                        <div class="form-group">


                          <p-chart type="doughnut" [data]="dataCraProtocol" [options]="chartOptions"
                            [style]="{'width': '2%'}"></p-chart>

                        </div>
                      </div>

                      <!-- <div class="col-md-2"></div> -->
                      <div class="col-md-5" style="margin-top: 6%;">
                        <div class="form-group">

                          <p-chart class="custom-chart" type="bar" [data]="basicDataProtocol"
                            [options]="basicOptions"></p-chart>
                        </div>

                      </div>

                      <!-- <div class="col-md-4" style="margin-top: 15%;">
                    <div class="form-group">
                      <div class="card">

                        <p-chart type="bar" [data]="stackedData" [options]="stackedOptions"></p-chart>
                        
                      </div>
                    </div>
                  </div> -->
                      <!-- <div class="col-md-4" style="margin-top: 15%;">
                    <div class="form-group">
                      <div class="card">
                        <p-chart type="bar" [data]="stackedData2" [options]="stackedOptions"></p-chart>
                      </div>
                    </div>
                  </div> -->
                    </div>
                  </div>
                </div>

                <!-- end col -->
              </div>
            </div>

          </div>

        </div>




      </div>
      <footer class="footer" style="position: fixed;">
        <div class="container-fluid">
          <div class="row">
            <div class="col-sm-6">{{getCurrentYear()}} © ROBOXA</div>
          </div>
        </div>
      </footer>